<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Tổng Số Khung Theo Nhân Viên</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f9f9f9;
        }

        textarea {
            width: 100%;
            height: 150px;
            font-size: 14px;
            padding: 8px;
            margin-bottom: 15px;
        }

        button {
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
        }

        table {
            border-collapse: collapse;
            margin-top: 15px;
            width: 100%;
            background: #fff;
        }

        table,
        th,
        td {
            border: 1px solid #ccc;
        }

        th,
        td {
            padding: 8px;
            text-align: left;
        }

        th {
            background: #eee;
        }

        .summary {
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>

<body>

    <h2>Tính Tổng Số Khung Theo Nhân Viên</h2>
    <textarea id="inputData" placeholder="Nhập dữ liệu dạng: tentask tênnv:sokhung"></textarea>
    <br>
    <button onclick="processData()">Xử Lý</button>

    <div id="result"></div>

    <script>
        function processData() {
            const text = document.getElementById("inputData").value.trim();
            const lines = text.split("\n").map(line => line.trim()).filter(line => line);

            const totals = {};

            lines.forEach(line => {
                const parts = line.split(":");
                if (parts.length === 2) {
                    const namePart = parts[0].trim();
                    const countPart = parseInt(parts[1].trim(), 10) || 0;

                    // Lấy tên nhân viên (sau tentask)
                    const name = namePart.split(" ").slice(1).join(" ").trim();
                    if (!totals[name]) {
                        totals[name] = 0;
                    }
                    totals[name] += countPart;
                }
            });

            let html = "<table><tr><th>Tên Nhân Viên</th><th>Tổng Số Khung</th></tr>";
            let totalFrames = 0;
            for (const [name, total] of Object.entries(totals)) {
                html += `<tr><td>${name}</td><td>${total}</td></tr>`;
                totalFrames += total;
            }
            html += "</table>";

            const totalEmployees = Object.keys(totals).length;

            html += `<div class="summary">Số lượng nhân viên: ${totalEmployees}</div>`;
            html += `<div class="summary">Tổng số khung mọi người: ${totalFrames}</div>`;

            document.getElementById("result").innerHTML = html;
        }
    </script>

</body>

</html>